version = "0.2.0"
env_files = [
    ".ports.env"
]

[scripts]
# Gets the ID of a running Docker container by its name (utility script)
getcontainerid.cmd = "docker ps | awk -v containername=\"%containername\" '$0 ~ containername{print $1}'"
getcontainerid.args = [
    "containername"
]

# Docker scripts
dc = "docker-compose --env-file .ports.env %%"
rebuild = "bonnie dc up --build -d && bonnie dc down" # Use this when you change any Docker configurations or update Rust dependencies
up = "bonnie dc up -d"
end = "bonnie dc down"
sh = "bonnie dc run --entrypoint \"/bin/zsh\" --use-aliases --rm playground"

# General Rust scripts
doc = "cargo doc"
test = "cargo watch -x \"test\""
dev = "cargo watch -x \"check\""
check = "cargo check && cargo fmt -- --check && cargo clippy && cargo test" # This will be run on CI as well
example = { cmd = "cargo watch -x \"run --example %example_name\"", args = ["example_name"] }
serverless-compile = "cd examples/netlify && sh build.sh"
serverless-deploy = "bonnie serverless compile && netlify deploy --prod"

# Releases the project to GitHub and publishes the crate itself
release = "standard-version --sign --commit-all && git push --follow-tags origin main && cargo publish"
